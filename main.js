var __webpack_modules__={5:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>_HTMLComponent});var _Components_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(649),_Config_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(467),_Debug_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(86),_Utils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(212);class _HTMLComponent extends HTMLElement{#e=null;#t=null;#r=null;template=null;rawHTML=null;uuid=null;debug=null;#n=[];constructor(){super(),this.preProcess(),this.debug=new _Debug_js__WEBPACK_IMPORTED_MODULE_3__.A,this.debug.info(`${this.constructor.name} has been instantiated.`)}#s(e,t=!1){return _Components_js__WEBPACK_IMPORTED_MODULE_0__.A.get()?.forEach((r=>{e=t?(0,_Utils_js__WEBPACK_IMPORTED_MODULE_2__.u4)(e,r.tag,r.tag.replace(/-/g,"")):(0,_Utils_js__WEBPACK_IMPORTED_MODULE_2__.u4)(e,r.tag.replace(/-/g,""),r.tag)})),e}#i(e){const t=_Components_js__WEBPACK_IMPORTED_MODULE_0__.A.get().map((e=>e.tag)).join("|"),r=new RegExp(`<(${t})([^>]*?)\\s*/>`,"g");return e.replace(r,((e,t,r)=>`<${t}${r}></${t}>`))}#o(e){const t=_Components_js__WEBPACK_IMPORTED_MODULE_0__.A.get(),r=Array.from(this.shadow?.children),n=Array.from(e?.children);r.forEach(((e,r)=>{if(t.find((t=>t.tag.toUpperCase()===e.tagName))){const t=n[r];return void(t&&(0,_Utils_js__WEBPACK_IMPORTED_MODULE_2__.BD)(e,t))}const s=n[r];s&&e.tagName.replace(/-/g,"")===s.tagName?e.replaceWith(s):e.remove()})),n.slice(r.length).forEach((e=>{this.shadow.appendChild(e)}))}ready(){return this.#e?this.#e:this.#t?Promise.reject(this.#t):(this.#e=(async()=>{try{await this.process()}catch(e){throw this.#t=e instanceof Error?e:new Error(String(e)),this.#t}})(),this.#e)}async process(){try{const e=await(0,_Utils_js__WEBPACK_IMPORTED_MODULE_2__.ZN)(this.#r.get().files?.html?.absolutePath,"html"),t=await(0,_Utils_js__WEBPACK_IMPORTED_MODULE_2__.ZN)(this.#r.get().files?.css?.absolutePath,"css");this.rawHTML=this.addUUIDToComponent(e);let r=this.#i(this.rawHTML);this.#r.setHTMLContent(this.#s((0,_Utils_js__WEBPACK_IMPORTED_MODULE_2__.gu)(r),!0)),this.#r.setCSSContent((0,_Utils_js__WEBPACK_IMPORTED_MODULE_2__.ep)(t)),this.toProcess(),this.#a()}catch(e){this.debug.error(`Initialization error: ${e}`)}}addUUIDToComponent(e){const t=_Components_js__WEBPACK_IMPORTED_MODULE_0__.A.get();for(let r=0;r<t.length;r++){const n=t[r].tag,s=new RegExp(`<(${n})(\\s[^>]*)?>`,"g");e=e.replace(s,((e,t,r="")=>{const n=this.generateUUID();return r.includes("uuid=")?e:`<${t} ${r.trim()?`${r.trim()} uuid="${n}"`:`uuid="${n}"`}>`}))}return e}retryProcess(){return this.#e=null,this.#t=null,this.ready()}#a(){try{const virtualDom=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_2__.n)(`<div> ${this.#r.get().files.html.content} </div>`).firstChild;this.uuid=this.getAttribute("uuid"),this.hasAttribute("uuid")||(this.debug.info(`No UUID provided for ${this.constructor.name}. Generated a new one.`),this.uuid=this.generateUUID(),this.setAttribute("uuid",this.uuid)),this.atProcess(virtualDom),this.template=this.getTemplateContent(this.innerHTML),this.clear(),this.#l(virtualDom),this.#u(virtualDom),this.#c(virtualDom),this.#h(virtualDom),this.shadow.innerHTML=`\n                <style>\n                    ${eval(`\`${this.#r.get().files.css.content}\``.replace(/\n/g,""))}\n                </style>\n                ${this.#s(eval(`\`${virtualDom.innerHTML}\``.replace(/\n/g,"")))}\n            `,this.#_(this.shadow),this.inProcess(this.shadow)}catch(e){this.debug.error(`Render Error in component: ${e}`)}this.#r.isDebugMode()&&(this.debug.setGroup(this.constructor.name,this.uuid),this.debug.debug())}getTemplateContent(e){const t=(new DOMParser).parseFromString(e,"text/html").querySelector("template");return t?(this.#l(t.content),this.#u(t.content),this.#c(t.content),this.#h(t.content),t.innerHTML):""}updateHTMLContent(){try{const virtualDom=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_2__.n)(`<div> ${this.#r.get().files.html.content} </div>`).firstChild;this.atProcess(virtualDom),this.#l(virtualDom),this.#u(virtualDom),this.#c(virtualDom),this.#h(virtualDom),virtualDom.innerHTML=` \n                <style>\n                    ${eval(`\`${this.#r.get().files.css.content}\``.replace(/\n/g,""))}\n                </style>\n                ${this.#s(eval(`\`${virtualDom.innerHTML}\``.replace(/\n/g,"")))}\n\n            `,this.#_(virtualDom),this.#o(virtualDom),this.inProcess(virtualDom)}catch(e){this.debug.error(`Error in updating component: ${e}`)}}#l(node){if(node)try{node.directDescendant().forEach(((element,key)=>{if(element.getAttribute("forEach")){const _getForEachExp=element.getAttribute("forEach").replace(/\${(.*?)}/g,"$1"),_arg=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_2__.nQ)(_getForEachExp,"in"),_key=_arg.firstItem.trim(),_array=eval(_arg.restItems),template=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_2__.n)(element.innerHTML);element.clear();for(let e=0;e<_array.length;e++){const t=template.clone();t.querySelectorAll("*").forEach((t=>{Array.from(t.attributes).filter((e=>"object"==typeof e)).forEach((r=>{if(r.value.includes(`\${${_key}}`)){const n=r.value.replaceAll(`\${${_key}}`,`\${${_arg.restItems}[${e}]}`);t.setAttribute(r.name,n)}}))})),element.appendChild(t)}element.removeAttribute("forEach")}this.#l(element)}))}catch(e){this.debug.error(`Error in for directive: ${e}`)}}#u(e){if(e)try{const t={token:null,flag:!1};e.directDescendant().forEach((e=>{if(e instanceof Element){if(e.hasAttribute("if")){t.flag=!1,t.token="if";const r=e.getAttribute("if"),n=this.#p(r);if(!n)return void(e.outerHTML="");t.flag=n,e.removeAttribute("if")}else if(e.hasAttribute("elseIf")){if("if"!==t.token)return this.debug.error("Syntax Error: 'else if' statement must be preceded by an 'if' condition."),void(e.outerHTML="");if("if"===t.token){if(t.flag)return void(e.outerHTML="");const r=e.getAttribute("elseIf"),n=this.#p(r);if(!n)return void(e.outerHTML="");t.flag=n,e.removeAttribute("elseIf")}}else if(e.hasAttribute("else")){if("if"!==t.token)return this.debug.error("Syntax Error: 'else' statement must be preceded by an 'if' or 'else if' condition."),void(e.outerHTML="");t.token=null,e.removeAttribute("else")}this.#u(e)}}))}catch(e){this.debug.error(`Error in if directive: ${e}`)}}#p(expression){if(!expression)return!1;try{const raw=expression.replace(/\${(.*?)}/g,((e,t)=>t.trim()));return Boolean(eval(raw))}catch(e){return console.warn("Failed to evaluate expression:",expression,e),!1}}#c(e){let t=e.querySelectorAll("*");t=Array.from(t).filter((e=>"param"===e.tagName.toLowerCase())),t.forEach((e=>{try{const t=e.getAttribute("value")||"",r=document.createTextNode(t);e.parentNode.insertBefore(r,e),e.remove()}catch(t){this.debug.error(`Error processing <param> element: ${e}`),this.debug.error(t)}}))}#h(e){e.querySelectorAll("[src]").forEach((e=>{try{const t=e.getAttribute("src"),r=this.#r.getAbsolutePath(),n=this.#r.toAbsolutePath(t,r);e.src=n}catch(t){this.debug.error(`Error resolving src for element: ${e}`),this.debug.error(`${t}`)}}))}#_(node){node.querySelectorAll("*").forEach((element=>{Array.from(element.attributes).forEach((attr=>{try{if(attr.name.endsWith("event")){const functionName=element.getAttribute(attr.name),eventName=attr.name.replace("event",""),listener=async event=>{try{eval(`this.${functionName}(event)`)}catch(e){this.debug?.error(e)}};element.addEventListener(eventName,listener),this.#n.push({element,eventName,listener}),element.removeAttribute(attr.name)}}catch(e){this.debug?.error(e)}}))}))}preProcess(e){this.shadow=this.attachShadow({mode:"open"}),this.#r=new _Config_js__WEBPACK_IMPORTED_MODULE_1__.A(e.config.name,e)}toProcess(){}atProcess(){}inProcess(e){}connectedCallback(){this.#r.isLazyLoading()?new IntersectionObserver(((e,t)=>{for(const r of e)r.isIntersecting&&(this.lazyLoad(),t.unobserve(this))}),{root:null,threshold:.1}).observe(this):this.ready().catch((e=>{this.debug?.error?.(`Component failed to initialize: ${e}`)}))}lazyLoad(){this.ready().then((()=>this.#g())).catch((e=>{this.debug?.error?.(`Component failed to initialize: ${e}`)}))}#g(){this.classList.add("loaded"),setTimeout((()=>{this.classList.remove("loaded"),this.classList.add("done")}),100),this.addEventListener("transitionend",(()=>{this.classList.remove("loaded"),this.classList.remove("done"),this.dispatchEvent(new CustomEvent("lazy-loaded",{bubbles:!0,composed:!0,detail:{element:this}}))}),{once:!0})}disconnectedCallback(){if(this.#n){for(const{element:e,eventName:t,listener:r}of this.#n)e.removeEventListener(t,r);this.#n=[]}}adoptedCallback(){}attributeChangedCallback(e,t,r){}generateUUID(){return crypto.randomUUID()}}},86:(e,t,r)=>{r.d(t,{A:()=>n});class n{group={message:"",style:["color: #41e179;","color: white; font-weight: normal;"]};logs={group:"LOG",message:[],style:["color:rgb(225, 225, 225);","color: white; font-weight: normal;"]};infos={group:"INFO",message:[],style:["color: #4169E1;","color: white; font-weight: normal;"]};warnings={group:"WARNING",message:[],style:["color:rgb(225, 206, 65);","color: white; font-weight: normal;"]};errors={group:"ERROR",message:[],style:["color:rgb(225, 65, 65);","color: white; font-weight: normal;"]};constructor(){}setGroup(e,t){this.group.message=`%c[${e}]%c :: ${t}`}log(e){this.logs.message.push(e)}info(e){this.infos.message.push(e)}warn(e){this.warnings.message.push(e)}error(e){this.errors.message.push(e)}groupLogs(e){e?.message?.length&&(console.groupCollapsed(`%c[${e.group}]%c: ${e.message.length} entries`,...e.style),e.message.forEach((e=>{console.log(e)})),console.groupEnd())}debug(){console.group(this.group.message,...this.group.style),this.groupLogs(this.logs),this.groupLogs(this.infos),this.groupLogs(this.warnings),this.groupLogs(this.errors),console.groupEnd()}}},212:(e,t,r)=>{r.d(t,{BD:()=>p,Fj:()=>l,ZN:()=>a,ep:()=>_,gu:()=>h,n:()=>i,nQ:()=>u,u4:()=>c});var n=r(417),s=r(269);function i(e){return document.createRange().createContextualFragment(e)}Node.prototype.clear=function(){return this.replaceChildren()},Node.prototype.directDescendant=function(){return this.querySelectorAll(":scope > *")},DocumentFragment.prototype.clone=function(){return this.cloneNode(!0)};const o=new Map;async function a(e,t){const r=`${e}::${t}`;if(o.has(r))return o.get(r);const n=(async()=>{try{const t=await fetch(e);if(!t.ok)throw new Error(`Could not load file: ${e}`);return await t.text()}catch(e){throw console.error("loadFile error:",e),e}})();return o.set(r,n),n}async function l(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return await t.json()}catch(e){return console.error("Failed to load JSON:",e),null}}function u(e,t){const r=new RegExp(`(.*?)${t}(.*)`),n=e.match(r);return n?{firstItem:n[1],restItems:n[2]}:{firstItem:e,restItems:""}}function c(e,t,r){const n=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),s=new RegExp(n,"g");return e.replace(s,r)}function h(e){return e.replace(/<!--[\s\S]*?-->/g,"")}function _(e){return e.replace(/\/\*[\s\S]*?\*\//g,"")}function p(e,t){Array.from(t.attributes).forEach((t=>{e.setAttribute(t.name,t.value)}))}n.A.stringify,n.A.parse,s.A.int,s.A.float,s.A.number,s.A.bool,s.A.char,s.A.string,s.A.array,s.A.map},269:(e,t,r)=>{r.d(t,{A:()=>n});class n{static int(e){if("number"!=typeof e||!Number.isInteger(e))throw new TypeError("Expected integer, got "+typeof e);return{value:e,add(e){if("number"!=typeof e)throw new TypeError("Addend must be a number");return this.value+=e,this},subtract(e){if("number"!=typeof e)throw new TypeError("Subtrahend must be a number");return this.value-=e,this},multiply(e){if("number"!=typeof e)throw new TypeError("Multiplier must be a number");return this.value*=e,this},divide(e){if("number"!=typeof e||0===e)throw new TypeError("Divisor must be a non-zero number");return this.value=Math.floor(this.value/e),this},toString(){return this.value.toString()}}}static float(e){if("number"!=typeof e||Number.isNaN(e)||!isFinite(e))throw new TypeError("Expected float, got "+typeof e);return{value:e,add(e){if("number"!=typeof e)throw new TypeError("Addend must be a number");return this.value+=e,this},subtract(e){if("number"!=typeof e)throw new TypeError("Subtrahend must be a number");return this.value-=e,this},multiply(e){if("number"!=typeof e)throw new TypeError("Multiplier must be a number");return this.value*=e,this},divide(e){if("number"!=typeof e||0===e)throw new TypeError("Divisor must be a non-zero number");return this.value/=e,this},toFixed(e){if(!Number.isInteger(e)||e<0)throw new TypeError("Digits must be a non-negative integer");return this.value.toFixed(e)},toString(){return this.value.toString()}}}static number(e){if("number"!=typeof e||!isFinite(e))throw new TypeError("Expected a finite number, got "+typeof e);return Number.isInteger(e)?n.int(e):n.float(e)}static bool(e){if("boolean"!=typeof e)throw new TypeError("Expected boolean, got "+typeof e);return{value:e,and(e){if("boolean"!=typeof e)throw new TypeError("Argument must be boolean");return this.value=this.value&&e,this},or(e){if("boolean"!=typeof e)throw new TypeError("Argument must be boolean");return this.value=this.value||e,this},not(){return this.value=!this.value,this},toString(){return this.value.toString()}}}static char(e){if("string"!=typeof e||1!==e.length)throw new TypeError(`Expected single character, got "${e}"`);return{value:e,isUpperCase(){return this.value===this.value.toUpperCase()},isLowerCase(){return this.value===this.value.toLowerCase()},toUpperCase(){return this.value=this.value.toUpperCase(),this},toLowerCase(){return this.value=this.value.toLowerCase(),this},toString(){return this.value}}}static string(e){if("string"!=typeof e)throw new TypeError("Expected string, got "+typeof e);return{value:e,length(){return this.value.length},toUpperCase(){return this.value=this.value.toUpperCase(),this},toLowerCase(){return this.value=this.value.toLowerCase(),this},includes(e){if("string"!=typeof e)throw new TypeError("Argument must be string");return this.value.includes(e)},concat(e){if("string"!=typeof e)throw new TypeError("Argument must be string");return this.value+=e,this},toString(){return this.value}}}static array(e){if(!Array.isArray(e))throw new TypeError("Expected array, got "+typeof e);return{value:e,length(){return this.value.length},push(e){return this.value.push(e),this},pop(){return this.value.pop()},map(e){return this.value=this.value.map(e),this},filter(e){return this.value=this.value.filter(e),this},toString(){return this.value.toString()}}}static map(e){if("object"!=typeof e||null===e||Array.isArray(e))throw new TypeError("Expected plain object for Map, got "+typeof e);return{value:e,get(e){return this.value[e]},set(e,t){return this.value[e]=t,this},has(e){return Object.prototype.hasOwnProperty.call(this.value,e)},delete(e){return!!this.has(e)&&(delete this.value[e],!0)},keys(){return Object.keys(this.value)},values(){return Object.values(this.value)},entries(){return Object.entries(this.value)},map(e){const t={};for(const[r,n]of Object.entries(this.value)){const s=e(r,n);Array.isArray(s)&&2===s.length?t[s[0]]=s[1]:t[r]=s}return this.value=t,this},toString(){return JSON.stringify(this.value)}}}}},417:(e,t,r)=>{r.d(t,{A:()=>n});class n{static stringify(e){try{return JSON.stringify(e).replace(/"/g,"'")}catch(e){throw new Error("Value cannot be stringified.")}}static parse(e){if("string"!=typeof e)throw new TypeError("parse() expects a string input.");try{return JSON.parse(e.replace(/'/g,'"'))}catch(e){throw new Error("Invalid string format for parsing.")}}}},467:(e,t,r)=>{r.d(t,{A:()=>n}),Object.prototype.pick=function(e){return e?Object.fromEntries(Object.entries(this).filter((([t])=>e.includes(t)))):this},Object.prototype.deepUpdate=function(){let e,t;if(arguments?.length)return 1===arguments.length&&(e=this,t=arguments[0]),2===arguments.length&&(e=arguments[0],t=arguments[1]),Object.entries(e).reduce(((r,[n,s])=>n in t?"object"!=typeof t[n]||null===t[n]||Array.isArray(t[n])?{...r,[n]:t[n]}:{...r,[n]:this.deepUpdate(e[n],t[n])}:{...r,[n]:s}),{})};class n{#f=null;#r={};#d=null;constructor(e,t){this.#f=e,this.#r=t.config,this.#d=this.#m(),this.#r.files.html.absolutePath=this.toAbsolutePath(this.#r?.files?.html?.path,this.#d),this.#r.files.css.absolutePath=this.toAbsolutePath(this.#r?.files?.css?.path,this.#d)}#m(){let e="";try{throw new Error}catch(t){e=t.stack.split(" ").find((e=>e.includes(`${this.#f}.js`))).slice(1,-1).replace(/[^/]+$/,"")}return e}toAbsolutePath(e,t){return new URL(e,t).href}getAbsolutePath(){return this.#d}get(e){return this.#r.pick(e)}set(e){this.#r=this.#r.deepUpdate(e)}setHTMLContent(e){this.#r.files.html.content=e}setCSSContent(e){this.#r.files.css.content=e}isLazyLoading(){return this.#r?.behavior?.lazyLoading}isDebugMode(){return this.#r?.behavior?.debug}}},649:(e,t,r)=>{r.d(t,{A:()=>n});const n=new class{#b=[];get(){return this.#b}register(e){this.#b.push(e)}registerAll(e){this.#b=[...this.#b,...e]}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={},Components=__webpack_require__(649),Utils=__webpack_require__(212);class _Dom{async init(...e){let t=null,r=e;this.isValidComponentObj(e[0])&&(Components.A.registerAll(e[0]),r=e.slice(1)),this.isValidComponentObj(e[0])||"string"==typeof e[0]||(t="./app.config.json"),e[0]&&"string"==typeof e[0]&&e[0].toLowerCase().endsWith(".json")&&(t=e[0],r=e.slice(1));for(let e=0;e<r.length;e++){const t=r[e];if("function"==typeof t)try{const e=t();e instanceof Promise&&await e}catch(t){console.error(`Error running initializer function at position ${e+1}:`,t)}else console.error(`Argument at position ${e+1} must be a function. Received: ${typeof t}`)}t&&await this.#y(t),this.#v()}async#y(e){const t=await(0,Utils.Fj)(e);for(const e of t["modular-cube-components"]){const{tag:t,path:r}=e;try{const e=await import(new URL(r,window?.location?.href).href);let n=r.replace(/^.*\/([^/]+)\.js$/,"$1"),s=e[n]||e.default;if(!s){console.warn(`Class "${n}" not found in module: ${r}`);continue}Components.A.register({tag:t,type:s})}catch(e){console.error(`Error importing or defining component from ${r}:`,e)}}}#v(){Components.A.get().forEach((({tag:e,type:t})=>{customElements.get(e)?console.warn(`Custom element "${e}" is already defined.`):customElements.define(e,t)}))}isValidComponentObj(e){return Array.isArray(e)&&e.every((e=>"object"==typeof e&&null!==e&&"string"==typeof e.tag&&"function"==typeof e.type))}}const Dom=new _Dom;class _Observable{constructor(){this.observables=[]}subscribe(e,t){if("function"!=typeof t)throw new Error(typeof t+" is not a valid argument for subscribe method, expected a function instead");this.observables=[...this.observables,{name:e,subscriber:t}]}unsubscribe(e){if("string"!=typeof e)throw new Error(typeof e+" is not a valid argument for unsubscribe method, expected a string instead");this.observables=this.observables.filter((t=>t.name!==e))}publish(e,t){const r=this.observables.find((t=>t.name===e));if(!r)throw new Error(`No subscribers found for event: ${e}`);r.subscriber(t)}}const Observable=new _Observable;var HTMLComponent=__webpack_require__(5),Serializer=__webpack_require__(417),Typed=__webpack_require__(269);const index_Dom=Dom,index_Observable=Observable,index_HTMLComponent=HTMLComponent.A,stringify=Serializer.A.stringify,parse=Serializer.A.parse,index_int=Typed.A.int,index_float=Typed.A.float,number=Typed.A.number,bool=Typed.A.bool,index_char=Typed.A.char,string=Typed.A.string,array=Typed.A.array,map=Typed.A.map;export{index_Dom as Dom,index_HTMLComponent as HTMLComponent,index_Observable as Observable,array,bool,index_char as char,index_float as float,index_int as int,map,number,parse,string,stringify};